Codigo resposta de um exercício da faculdade!

INSTRUÇÕES:
"Você deve escrever um programa que lê duas imagens do tipo PPM colorido P3, da entrada padrão e que imprima na saída uma imagem PPM P3 que é a colagem das duas imagens lidas.
As imagens .ppm dadas na entrada serão do tipo P3, ascii colorido. Este formato começa com uma string igual a "P3", seguido de um caractere branco. Em seguida, múltiplos inteiros separados por caracteres brancos aparecem. Os dois primeiros números C e L indicam o número de colunas (C) e o número de linhas (L), respectivamente nesta ordem. Em seguida, um número M que indica o valor máximo das intensidades de cada cor seguintes aparece, indicando o valor equivalente ao máximo de intensidade daquela componente da cor (sendo zero ausência daquela componente de cor). As componentes de cores são Vermelho, Verde e Azul. Em seguida 3CL número naturais menores ou iguais a M aparecem, indicando as intensidades dos componentes de cor dos pixeis da imagem, na ordem primeiro linhas superiores e dentro das linhas primeiro os pixeis mais à esquerda. Cada pixel é representado por 3 números, sendo a ordem das cores representadas pelos números: Vermelho, Verde e Azul. As duas imagens serão passadas consecutivamente no arquivo de entrada padrão (stdin).

As duas imagens passadas terão o seu número M (máximo de intensidade de componente de cor) iguais. Seu programa deve colar as duas imagens gerando uma nova imagem cujo número de colunas é igual ao máximo do número de colunas das duas imagens e cujo número de linhas é igual à soma do número de linhas das imagens. A primeira imagem passada deve ser aparecer no início da nova imagem gerada, começando no canto esquerdo superior. A segunda imagem passada deve aparecer logo abaixo do fim da primeira imagem, iniciando-se no canto esquerdo. Os pixeis da nova imagem gerada que não pertecerem a nenhuma das duas imagens devem ter a cor branca (representado por M M M). Seu programa deve imprimir a nova imagem resultante na saída padrão.

Você NÃO pode supor tamanho máximo das duas imagens. Seu programa deve alocar dinamicamente a memória necessária, de acordo com os valores de C e L lidos. Você deve supor que os M's das duas imagens são IGUAIS."